{% extends 'base.html.twig' %}

{% block title %}User admin Profile{% endblock %}

{% block stylesheets %}
    {{ parent() }}
    <link rel="stylesheet" href="{{ asset('css/memberdashboard.css') }}">
{% endblock %}

{% block body %}
    <div class="profile-container">
        <!-- Left Block: Activity Feed -->
        <div class="profile-feed">
            <h2>Activity Feed</h2>
            <p> todo put buttons to switch feed (guild, friends, all...)
            <ul>
                <li>Guild Event: Raid scheduled for Friday</li>
                <li>Friend Achievement: JohnDoe reached level 70</li>
                <li>Guild Update: New member joined</li>
            </ul>
        </div>

        <!-- Center Upper Block: Navigation Menu -->
        <div class="profile-menu">
            <nav>
                <ul>
                    <li><a href="#">Overview</a></li>
                    <li><a href="#">Social (x)</a></li>
                    <li><a href="#">Guild (x)</a></li>
                    <li><a href="#">Black AH</a></li>
                    <li><a href="#">Events</a></li>
                    <li><a href="#">Settings</a></li>
                    <li><a href="{{path('app_logout')}}">LOGOUT</a></li>
                </ul>
            </nav>
        </div>

        <!-- Center Lower Block: User Profile -->
        <div class="profile-user">
            <h2>{{ app.user.username }}</h2>
            <p>Global Metrics:</p>
            <ul>
                <li>Trust score : TODO IMPLEMENT</li>
                <li>Current selling value: TODO EXTRACT INFORMATION ON CONTROLLER AND PUT ON FCKING DATA MODEL</li>
                <li>Nb of guilds joined: TODO EXTRACT WITH FILTER FROM DATA MODEL FIND HOW</li>
            </ul>

            <p>Account creation date: {{ app.user.createdAt|date('Y-md H:i:s') }}</p>
        </div>

        <!-- Right Block: Character Details -->
        <div class="profile-character">
            <h2>Characters</h2>
            {% if app.user.characters|length > 0 %}
                    {% for character in app.user.characters %}
                        <div class="character-occurence">
                            <div class="character-icon-left">
                                <img src="{% if character.characterClass.classImgPath is not null %} {{ asset(character.characterClass.classImgPath) }} {% else %} {{ asset('images/undefinedcharacterimg.jpg') }} {% endif %}" alt="{{ character.name }}">
                            </div>
                                <div class="character-summary-right">
                                <strong>Shared items link</strong><br>
                                <strong>ICON EVENTS LINK:</strong><br>
                                <strong>ICON BANK LINK:</strong><br>
                                <strong>ICON GUILD LINK</strong><br>
                            </div>
                            <div class="character-summary-right">
                                <strong>Name:</strong> {{ character.name }}<br>
                                <strong>Class:</strong> {{ character.characterClass.name }} <br>
                                <strong>Level:</strong> {{ character.level }}<br>
                                <strong>Gear Level:</strong> {{ character.gearLevel | default("noob") }}<br>
                                <strong>Guild:</strong> {{character.guild.name | default("no guild") }} <br>
                            </div>
                        </div>    
                        <hr>
                    {% endfor %}
            {% else %}
                <p>No characters found for this user.</p>
            {% endif %}
        </div>
    </div>
{% endblock %}